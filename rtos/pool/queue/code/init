pool = gpool.poolq
~ tx_semaphore_create(pool.sema, "OSA_Sema", 1) != 0 && exit(1)

pool.alloc_count = 0
pool.created_count = 0
pool.free_head = pool.nodes
pool.used_tail = null

node = pool.nodes
for i in 0..4:
  node.next = node + 5C
  node.parent = pool
  node.created_count = &pool.created_count  # pointer, not a value!
  node.restype = 0
  node = node.next
}
node.next = null

exit(0)
